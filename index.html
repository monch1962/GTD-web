<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Getting Things Done web app with smart task management">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>GTD Web - Getting Things Done</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-check-circle"></i> GTD Web</h1>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <a href="#" class="nav-item active" data-view="inbox">
                        <i class="fas fa-inbox"></i>
                        <span>Inbox</span>
                        <span class="count" id="inbox-count">0</span>
                    </a>
                    <a href="#" class="nav-item" data-view="next">
                        <i class="fas fa-bolt"></i>
                        <span>Next Actions</span>
                        <span class="count" id="next-count">0</span>
                    </a>
                    <a href="#" class="nav-item" data-view="waiting">
                        <i class="fas fa-clock"></i>
                        <span>Waiting For</span>
                        <span class="count" id="waiting-count">0</span>
                    </a>
                    <a href="#" class="nav-item" data-view="someday">
                        <i class="fas fa-cloud"></i>
                        <span>Someday/Maybe</span>
                        <span class="count" id="someday-count">0</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-item projects-dropdown-toggle">
                        <i class="fas fa-folder"></i>
                        <span>Projects</span>
                        <span class="count" id="projects-count">0</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </div>
                    <div class="projects-dropdown" id="projects-dropdown">
                        <!-- Projects will be dynamically added here -->
                    </div>
                    <a href="#" class="nav-item" data-view="reference">
                        <i class="fas fa-book"></i>
                        <span>Reference</span>
                        <span class="count" id="reference-count">0</span>
                    </a>
                </div>

                <div class="nav-section">
                    <a href="#" class="nav-item" data-view="all">
                        <i class="fas fa-list"></i>
                        <span>All Items</span>
                    </a>
                    <a href="#" class="nav-item" id="help-button">
                        <i class="fas fa-question-circle"></i>
                        <span>Help</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info" id="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span id="user-id">Loading...</span>
                </div>
                <button id="sync-status" class="sync-button">
                    <i class="fas fa-sync"></i>
                    <span class="sync-text">Synced</span>
                </button>
                <div style="display: flex; gap: var(--spacing-xs); margin-top: var(--spacing-sm);">
                    <button id="btn-export" class="btn btn-secondary" style="flex: 1; font-size: 0.75rem; padding: 4px 8px;" title="Export all data to JSON">
                        <i class="fas fa-download"></i> Export
                    </button>
                    <button id="btn-import" class="btn btn-secondary" style="flex: 1; font-size: 0.75rem; padding: 4px 8px;" title="Import data from JSON">
                        <i class="fas fa-upload"></i> Import
                    </button>
                </div>
                <input type="file" id="import-file-input" accept=".json" style="display: none;">
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <div style="flex: 1; max-width: 400px; margin-right: var(--spacing-md);">
                    <div style="position: relative;">
                        <i class="fas fa-search" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                        <input type="text" id="global-search" placeholder="Search tasks..." style="width: 100%; padding: 8px 10px 8px 32px; border: 1px solid var(--border-color); border-radius: var(--radius-sm); font-size: 0.9rem;">
                        <button id="clear-search" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--text-secondary); cursor: pointer; display: none;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <h2 id="view-title" style="margin: 0;">Inbox</h2>
                <div style="display: flex; gap: var(--spacing-sm);">
                    <button id="btn-dark-mode" class="btn btn-secondary" title="Toggle Dark Mode">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="btn-calendar-view" class="btn btn-secondary" title="Calendar View">
                        <i class="fas fa-calendar-alt"></i>
                    </button>
                    <button id="btn-focus-mode" class="btn btn-secondary" title="Focus Mode">
                        <i class="fas fa-bullseye"></i>
                    </button>
                    <button id="btn-new-project" class="btn btn-secondary" title="New Project">
                        <i class="fas fa-folder-plus"></i>
                    </button>
                    <button id="btn-weekly-review" class="btn btn-secondary" title="Weekly Review">
                        <i class="fas fa-calendar-week"></i>
                    </button>
                    <button id="btn-dashboard" class="btn btn-secondary" title="Dashboard">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                    <button id="btn-bulk-select" class="btn btn-secondary" style="display: none;">
                        <i class="fas fa-check-square"></i> Select Multiple
                    </button>
                    <button id="btn-suggestions" class="btn btn-primary">
                        <i class="fas fa-lightbulb"></i> What should I work on?
                    </button>
                </div>
            </header>

            <!-- Advanced Search Panel -->
            <div id="advanced-search-panel" style="display: none; margin-bottom: var(--spacing-md); padding: var(--spacing-md); background: var(--bg-secondary); border-radius: var(--radius-md); border: 1px solid var(--border-color);">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
                    <div>
                        <label style="display: block; font-size: 0.85rem; margin-bottom: 4px;">Context</label>
                        <select id="search-context" style="width: 100%; padding: 6px; border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                            <option value="">Any Context</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-size: 0.85rem; margin-bottom: 4px;">Energy</label>
                        <select id="search-energy" style="width: 100%; padding: 6px; border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                            <option value="">Any Energy</option>
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-size: 0.85rem; margin-bottom: 4px;">Status</label>
                        <select id="search-status" style="width: 100%; padding: 6px; border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                            <option value="">Any Status</option>
                            <option value="inbox">Inbox</option>
                            <option value="next">Next Actions</option>
                            <option value="waiting">Waiting For</option>
                            <option value="someday">Someday/Maybe</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-size: 0.85rem; margin-bottom: 4px;">Due Date</label>
                        <select id="search-due" style="width: 100%; padding: 6px; border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                            <option value="">Any Time</option>
                            <option value="overdue">Overdue</option>
                            <option value="today">Due Today</option>
                            <option value="week">Due This Week</option>
                            <option value="month">Due This Month</option>
                            <option value="nodate">No Due Date</option>
                        </select>
                    </div>
                </div>
                <div style="display: flex; gap: var(--spacing-sm); justify-content: space-between; align-items: center;">
                    <div>
                        <button id="save-search" class="btn btn-secondary" style="font-size: 0.85rem;">
                            <i class="fas fa-save"></i> Save Search
                        </button>
                        <select id="saved-searches" style="margin-left: var(--spacing-sm); padding: 6px; border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                            <option value="">Saved Searches...</option>
                        </select>
                        <button id="delete-saved-search" class="btn btn-secondary" style="font-size: 0.85rem; margin-left: var(--spacing-xs); display: none;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <button id="clear-advanced-search" class="btn btn-secondary" style="font-size: 0.85rem;">
                        <i class="fas fa-times"></i> Clear Filters
                    </button>
                </div>
            </div>

            <div id="bulk-actions-bar" style="display: none; margin-bottom: var(--spacing-md); padding: var(--spacing-sm); background: var(--bg-secondary); border-radius: var(--radius-md); align-items: center; justify-content: space-between;">
                <span style="font-size: 0.9rem;"><strong><span id="bulk-selected-count">0</span></strong> tasks selected</span>
                <div style="display: flex; gap: var(--spacing-sm);">
                    <button id="btn-bulk-complete" class="btn btn-success">
                        <i class="fas fa-check"></i> Complete
                    </button>
                    <button id="btn-bulk-cancel" class="btn btn-secondary">
                        Cancel
                    </button>
                </div>
            </div>

            <div class="quick-add">
                <input type="text" id="quick-add-input" placeholder="Quick add... (Try: &quot;Call John @work tomorrow high energy&quot;)">
                <div style="margin-top: var(--spacing-sm);">
                    <button class="btn btn-secondary" id="toggle-templates" style="font-size: 0.75rem; padding: 2px 8px; margin-right: var(--spacing-xs);">
                        <i class="fas fa-clone"></i> Quick Templates
                    </button>
                    <button class="btn btn-secondary" id="toggle-nlp-help" style="font-size: 0.75rem; padding: 2px 8px;">
                        <i class="fas fa-info-circle"></i> See examples
                    </button>
                    <div id="nlp-examples" style="display: none; margin-top: var(--spacing-sm); padding: var(--spacing-sm); background: var(--bg-secondary); border-radius: var(--radius-sm); font-size: 0.8rem;">
                        <strong>Natural language examples:</strong>
                        <ul style="margin: var(--spacing-xs) 0 0 var(--spacing-sm) 0; padding-left: 20px;">
                            <li><code>Call John @work tomorrow high energy</code></li>
                            <li><code>Team meeting @computer weekly recurring</code></li>
                            <li><code>Pay bills @home monthly due 15th</code></li>
                            <li><code>Quick email 15min low energy</code></li>
                            <li><code>Gym workout @personal daily</code></li>
                            <li><code>Review project in 3 days</code></li>
                        </ul>
                    </div>
                    <div id="templates-dropdown" style="display: none; margin-top: var(--spacing-sm); padding: var(--spacing-sm); background: var(--bg-secondary); border-radius: var(--radius-sm); font-size: 0.8rem;">
                        <strong>Quick Templates:</strong>
                        <div id="templates-list" style="margin-top: var(--spacing-xs); display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--spacing-xs);">
                            <!-- Templates will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                <div class="quick-contexts">
                    <span class="quick-context-label">Quick contexts:</span>
                    <!-- Default context buttons will be rendered here dynamically by JavaScript -->
                    <button class="btn-create-context" id="btn-create-context">
                        <i class="fas fa-plus"></i> Create Context
                    </button>
                </div>
            </div>

            <div id="tasks-container" class="tasks-container">
                <!-- Tasks will be rendered here -->
            </div>

            <div id="projects-container" class="projects-container" style="display: none;">
                <!-- Projects will be rendered here -->
            </div>

            <div id="reference-container" class="reference-container" style="display: none;">
                <!-- Reference items will be rendered here -->
            </div>
        </main>

        <!-- Task/Edit Modal -->
        <div id="task-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-title">Add Task</h3>
                    <button class="close-button" id="close-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="task-form" class="task-form">
                    <input type="hidden" id="task-id">

                    <div class="form-group">
                        <label for="task-title">Title *</label>
                        <input type="text" id="task-title" required>
                    </div>

                    <div class="form-group">
                        <label for="task-description">Description</label>
                        <textarea id="task-description" rows="3"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="task-type">Type</label>
                            <select id="task-type">
                                <option value="task">Task</option>
                                <option value="project">Project</option>
                                <option value="reference">Reference</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="task-status">Status</label>
                            <select id="task-status">
                                <option value="inbox">Inbox</option>
                                <option value="next">Next Action</option>
                                <option value="waiting">Waiting For</option>
                                <option value="someday">Someday/Maybe</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="task-energy">Energy Required</label>
                            <select id="task-energy">
                                <option value="">None</option>
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                                <option value="low">Low</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="task-time">Time Required (min)</label>
                            <input type="number" id="task-time" min="0" step="5" placeholder="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="task-project">Project</label>
                        <select id="task-project">
                            <option value="">No Project</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="task-due-date">Due Date</label>
                            <input type="date" id="task-due-date">
                        </div>

                        <div class="form-group">
                            <label for="task-defer-date">Defer Date</label>
                            <input type="date" id="task-defer-date">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="task-recurrence">Recurrence</label>
                        <select id="task-recurrence">
                            <option value="">No Recurrence</option>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                        <small style="color: var(--text-secondary);">Automatically create a new task when this task is completed</small>
                    </div>

                    <div class="form-group" id="recurrence-end-date-group" style="display: none;">
                        <label for="task-recurrence-end-date">Recurrence End Date</label>
                        <input type="date" id="task-recurrence-end-date">
                        <small style="color: var(--text-secondary);">Optional: Stop creating recurring tasks after this date</small>
                    </div>

                    <div class="form-group" id="waiting-for-section" style="display: none;">
                        <label for="task-waiting-for-description">Waiting For Description</label>
                        <input type="text" id="task-waiting-for-description" placeholder="e.g., Response from John, Design team approval">
                        <small style="color: var(--text-secondary);">What/who are you waiting for?</small>
                    </div>

                    <div class="form-group" id="waiting-for-deps-section" style="display: none;">
                        <label for="task-waiting-for-tasks">Waiting For (Task Dependencies)</label>
                        <div id="waiting-for-tasks-list" style="max-height: 150px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">No task dependencies selected</p>
                        </div>
                        <small style="color: var(--text-secondary);">Select tasks that must be completed before this task becomes actionable</small>
                    </div>

                    <div class="form-group">
                        <label for="task-contexts">Contexts (comma separated)</label>
                        <input type="text" id="task-contexts" placeholder="@home, @computer, @urgent">
                        <small style="color: var(--text-secondary);">Contexts must start with @ (e.g., @home, @work, @urgent)</small>
                        <div class="quick-contexts-modal">
                            <!-- Default context buttons will be rendered here dynamically by JavaScript -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="task-notes">Notes</label>
                        <textarea id="task-notes" rows="4" placeholder="Add notes, progress updates, or any other information about this task..."></textarea>
                        <small style="color: var(--text-secondary);">Track progress, store ideas, or add any other information</small>
                    </div>

                    <div class="form-group">
                        <label>Subtasks / Checklist</label>
                        <div id="subtasks-container" style="border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: var(--spacing-sm);">No subtasks yet. Add subtasks to break down this task into smaller steps.</p>
                        </div>
                        <div style="display: flex; gap: var(--spacing-sm);">
                            <input type="text" id="new-subtask-input" placeholder="Add a subtask..." style="flex: 1; padding: 6px; border: 1px solid var(--border-color); border-radius: var(--radius-sm);">
                            <button type="button" class="btn btn-secondary" id="btn-add-subtask">
                                <i class="fas fa-plus"></i> Add
                            </button>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save
                        </button>
                        <button type="button" class="btn btn-secondary" id="cancel-modal">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Project Modal -->
        <div id="project-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="project-modal-title">Add Project</h3>
                    <button class="close-button" id="close-project-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="project-form" class="task-form">
                    <input type="hidden" id="project-id">

                    <div class="form-group">
                        <label for="project-title">Title *</label>
                        <input type="text" id="project-title" required>
                    </div>

                    <div class="form-group">
                        <label for="project-description">Description</label>
                        <textarea id="project-description" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="project-status">Status</label>
                        <select id="project-status">
                            <option value="active">Active</option>
                            <option value="someday">Someday/Maybe</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="project-contexts">Contexts (comma separated)</label>
                        <input type="text" id="project-contexts" placeholder="@work, @personal">
                        <small style="color: var(--text-secondary);">Contexts must start with @ (e.g., @home, @work)</small>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save
                        </button>
                        <button type="button" class="btn btn-secondary" id="cancel-project-modal">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Context Creation Modal -->
    <div id="context-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="context-modal-title">Create New Context</h3>
                <button class="close-button" id="close-context-modal">&times;</button>
            </div>
            <form id="context-form" class="task-form">
                <div class="form-group">
                    <label for="context-name">Context Name *</label>
                    <input type="text" id="context-name" required placeholder="@urgent, @review, @priority">
                    <small style="color: var(--text-secondary); margin-top: 4px; display: block;">
                        Contexts must start with @ symbol (e.g., @errands, @work, @urgent). The @ will be added automatically if missing.
                    </small>
                </div>

                <div id="context-error" style="color: var(--danger-color); display: none; margin-bottom: 1rem;"></div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Create Context
                    </button>
                    <button type="button" class="btn btn-secondary" id="cancel-context-modal">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal">
        <div class="modal-content" style="max-width: 800px; max-height: 80vh; overflow-y: auto;">
            <div class="modal-header">
                <h3>GTD Web - Help & Instructions</h3>
                <button class="close-button" id="close-help-modal">&times;</button>
            </div>
            <div class="help-content" style="padding: var(--spacing-lg);">
                <h4>Getting Started with GTD</h4>
                <p>Welcome to GTD Web! This app implements David Allen's Getting Things Done methodology to help you stay organized and productive.</p>

                <h5>Core Concepts</h5>
                <ul>
                    <li><strong>Inbox</strong> - Quick capture for all new tasks and ideas. Process these regularly.</li>
                    <li><strong>Next Actions</strong> - Actionable tasks you can do right now.</li>
                    <li><strong>Waiting For</strong> - Tasks you're waiting on someone/something else for.</li>
                    <li><strong>Someday/Maybe</strong> - Tasks you might do later, but not now.</li>
                    <li><strong>Projects</strong> - Multi-step outcomes that require multiple tasks.</li>
                    <li><strong>Reference</strong> - Non-actionable information you want to keep.</li>
                </ul>

                <h5>Creating Tasks</h5>
                <ol>
                    <li><strong>Quick Add</strong> - Type in the input box and press Enter for fast capture</li>
                    <li><strong>Detailed Add</strong> - Click "Add Task" button for full details</li>
                    <li>Set status, energy level, time estimates, due dates, and defer dates</li>
                    <li>Assign to projects and add tags</li>
                </ol>

                <h5>Managing Projects</h5>
                <ol>
                    <li>Go to "Projects" view</li>
                    <li>Click "Add Project" button</li>
                    <li>Enter title, description, and tags</li>
                    <li>Assign tasks to projects when creating/editing them</li>
                    <li><strong>Note:</strong> When you assign an Inbox task to a project, it automatically moves to Next Actions</li>
                </ol>

                <h5>Using Contexts</h5>
                <ul>
                    <li><strong>Default Contexts:</strong> @home, @work, @personal, @computer, @phone</li>
                    <li><strong>Custom Contexts:</strong> Click the green "Create Context" button to make your own</li>
                    <li><strong>Delete Contexts:</strong> Click the Ã— button on custom tags to delete them (removes from all tasks/projects)</li>
                    <li>Click context buttons to quickly add them to tasks</li>
                    <li>Use the context filter in the header to filter tasks by context</li>
                </ul>

                <h5>Task Dependencies (Waiting For)</h5>
                <ol>
                    <li>Create or edit a task</li>
                    <li>Set status to "Waiting For"</li>
                    <li><strong>Description:</strong> What/who are you waiting for? (e.g., "Response from John")</li>
                    <li><strong>Dependencies:</strong> Select tasks that must complete first</li>
                    <li>When dependencies are met, tasks automatically move to Next Actions!</li>
                </ol>

                <h5>Dates & Deadlines</h5>
                <ul>
                    <li><strong>Due Date</strong> - When a task must be done. Overdue tasks show in red.</li>
                    <li><strong>Defer Date</strong> - Hide a task until this date (great for future tasks)</li>
                    <li>Tasks with defer dates won't show in Next Actions until the date arrives</li>
                </ul>

                <h5>Filtering Tasks</h5>
                <ul>
                    <li><strong>Context Filter</strong> - Filter by any context</li>
                    <li><strong>Energy Filter</strong> - Find tasks matching your energy level</li>
                    <li><strong>Time Filter</strong> - Find tasks that fit your available time</li>
                    <li>Filters work together for powerful task discovery</li>
                </ul>

                <h5>Workflow Tips</h5>
                <ol>
                    <li><strong>Capture Everything</strong> - Don't trust your memory, use the Inbox</li>
                    <li><strong>Process Inbox Daily</strong> - Decide what each item means and where it goes</li>
                    <li><strong>Review Weekly</strong> - Check all projects, waiting items, and someday/maybe tasks</li>
                    <li><strong>Do by Context</strong> - Use tags to filter by @home, @work, @computer, etc.</li>
                    <li><strong>Match Energy</strong> - Use the energy filter when tired or energized</li>
                </ol>

                <h5>Keyboard Shortcuts</h5>
                <ul>
                    <li><strong>Enter</strong> - Quick add task (in quick input field)</li>
                    <li><strong>Escape</strong> - Close modals</li>
                </ul>

                <h5>Data Storage</h5>
                <p>All data is stored locally in your browser's localStorage. Your tasks stay private on your device. Clearing browser data will delete your tasks, so consider backing up regularly.</p>
            </div>
        </div>
    </div>

    <!-- Gantt Chart Modal -->
    <div id="gantt-modal" class="modal">
        <div class="modal-content" style="max-width: 90%; width: 1400px;">
            <div class="modal-header">
                <h3 id="gantt-modal-title">Project Gantt Chart</h3>
                <button class="close-button" id="close-gantt-modal">&times;</button>
            </div>
            <div class="gantt-container" id="gantt-chart">
                <!-- Gantt chart will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Dashboard Modal -->
    <div id="dashboard-modal" class="modal">
        <div class="modal-content" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h2>Productivity Dashboard</h2>
                <button class="close-button" id="close-dashboard-modal">&times;</button>
            </div>
            <div class="modal-body" style="padding: var(--spacing-lg);">
                <div id="dashboard-content">
                    <!-- Dashboard will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Weekly Review Modal -->
    <div id="weekly-review-modal" class="modal">
        <div class="modal-content" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h2>Weekly Review</h2>
                <button class="close-button" id="close-weekly-review-modal">&times;</button>
            </div>
            <div class="modal-body" style="padding: var(--spacing-lg);">
                <div id="weekly-review-content">
                    <!-- Weekly review will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Calendar View Modal -->
    <div id="calendar-modal" class="modal">
        <div class="modal-content" style="max-width: 1000px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h2>Calendar View</h2>
                <button class="close-button" id="close-calendar-modal">&times;</button>
            </div>
            <div class="modal-body" style="padding: var(--spacing-lg);">
                <div id="calendar-content">
                    <!-- Calendar will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Focus Mode Overlay -->
    <div id="focus-mode-overlay" class="focus-overlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: var(--bg-primary); z-index: 10000; padding: var(--spacing-lg); display: flex; flex-direction: column;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-lg);">
            <button id="btn-exit-focus" class="btn btn-secondary">
                <i class="fas fa-times"></i> Exit Focus
            </button>
            <div id="pomodoro-timer" style="font-size: 3rem; font-weight: bold; color: var(--primary-color);">25:00</div>
            <div style="display: flex; gap: var(--spacing-sm);">
                <button id="btn-pomodoro-start" class="btn btn-success">
                    <i class="fas fa-play"></i> Start
                </button>
                <button id="btn-pomodoro-pause" class="btn btn-warning" style="display: none;">
                    <i class="fas fa-pause"></i> Pause
                </button>
                <button id="btn-pomodoro-reset" class="btn btn-secondary">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
        </div>
        <div id="focus-task-container" style="flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; max-width: 800px; margin: 0 auto;">
            <!-- Focus task will be rendered here -->
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>
